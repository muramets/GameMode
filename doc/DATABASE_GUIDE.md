# üíæ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö RPG Therapy - –ü–æ–ª–Ω–æ–µ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

*–í–µ—Ä—Å–∏—è: 1.0 | –î–∞—Ç–∞: –ò—é–Ω—å 2024*

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)](#–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
2. [üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö)
3. [üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∏ API](#–ø–æ—Ç–æ–∫-–¥–∞–Ω–Ω—ã—Ö-–∏-api)
4. [üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
5. [üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å-–∏-–¥–æ—Å—Ç—É–ø)
6. [üìä –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö](#–ø—Ä–∏–º–µ—Ä—ã-–¥–∞–Ω–Ω—ã—Ö)
7. [üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–±–∞–∑–æ–π)
8. [üö® Troubleshooting](#troubleshooting)
9. [üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏) {#–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö}

### ü§î –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ **–æ–±–ª–∞—á–Ω—É—é –ø–∞–ø–∫—É —Å —Ñ–∞–π–ª–∞–º–∏**, –≥–¥–µ:
- **–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** = –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ —Å –µ–≥–æ –∏–º–µ–Ω–µ–º
- **–í–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏** = –≤—Å–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ: –Ω–∞–≤—ã–∫–∏, –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
- **–î–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ** = —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–ª—é—á (Google –∞–∫–∫–∞—É–Ω—Ç)
- **–ü–∞–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞** = —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –º–∏—Ä–µ

### üåç –ì–¥–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ?

**MongoDB Atlas** - —ç—Ç–æ –æ–±–ª–∞—á–Ω–∞—è —Å–ª—É–∂–±–∞, –∫–æ—Ç–æ—Ä–∞—è:
- üè¢ **–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö Amazon AWS
- üåê **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏** - –∫–æ–ø–∏–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö  
- üîí **–ó–∞—â–∏—â–µ–Ω–∞** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- üí∞ **–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è** - –¥–æ 512MB –¥–∞–Ω–Ω—ã—Ö (—ç—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ —Ç—ã—Å—è—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### üì± –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏:

1. **–í—ã –≤—Ö–æ–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** ‚Üí Google –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤–∞—à—É –ª–∏—á–Ω–æ—Å—Ç—å
2. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ** ‚Üí Backend –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º
3. **Backend –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±–∞–∑–µ** ‚Üí "–ù–∞–π–¥–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID = xyz"
4. **–ë–∞–∑–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ** ‚Üí –í—Å–µ –≤–∞—à–∏ –Ω–∞–≤—ã–∫–∏, –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, –∏—Å—Ç–æ—Ä–∏—è
5. **–í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º** ‚Üí –ò–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É
6. **–ó–∞—Ö–æ–¥–∏—Ç–µ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚Üí –í–∏–¥–∏—Ç–µ —Ç–µ –∂–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### üîÑ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏:

#### –ö–æ–≥–¥–∞ –≤—ã –Ω–∞–∂–∏–º–∞–µ—Ç–µ –∫–Ω–æ–ø–∫—É check-in:
```
[–ù–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É] ‚Üí [JavaScript –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç] ‚Üí [–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä] 
‚Üí [–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞] ‚Üí [–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ MongoDB] ‚Üí [–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç]
‚Üí [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è] ‚Üí [–í—ã –≤–∏–¥–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è]
```

#### –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- üü¢ **–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ (0 –º—Å)
- üü° **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ–±–ª–∞–∫–æ**: 100-300 –º—Å  
- üü¢ **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ**: 200-500 –º—Å

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö {#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö}

### üìä –û–±—â–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```
üìÅ MongoDB Atlas: gamemode-ea510
‚îú‚îÄ‚îÄ üìã –ö–æ–ª–ª–µ–∫—Ü–∏—è: users (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
‚îÇ   ‚îú‚îÄ‚îÄ üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 (Google ID: abc123)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìß email: "user1@gmail.com"  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üë§ displayName: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ userData: { –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è }
‚îÇ   ‚îú‚îÄ‚îÄ üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2 (Google ID: def456)  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìß email: "user2@gmail.com"
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üë§ displayName: "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞"
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ userData: { –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è }
‚îÇ   ‚îî‚îÄ‚îÄ ...
```

### üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```javascript
{
  // === –°–ò–°–¢–ï–ú–ù–´–ï –ü–û–õ–Ø ===
  _id: ObjectId("507f1f77bcf86cd799439011"),        // MongoDB ID
  firebaseUid: "abc123def456ghi789",                 // ID –∏–∑ Firebase
  email: "user@gmail.com",                           // Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  displayName: "–ò–º—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",                   // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
  createdAt: ISODate("2024-06-01T10:00:00Z"),       // –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  updatedAt: ISODate("2024-06-01T15:30:00Z"),       // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  
  // === –î–ê–ù–ù–´–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ===
  userData: {
    // üéØ –ù–∞–≤—ã–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    skills: [
      {
        id: 1,
        name: "–§–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
        icon: "üèÉ",
        hover: "–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ",
        level: 5,                    // –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å (0-10)
        experience: 150,             // –û—á–∫–∏ –æ–ø—ã—Ç–∞
        order: 1                     // –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
      },
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏
    ],
    
    // üìã –ü—Ä–æ—Ç–æ–∫–æ–ª—ã (–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
    protocols: [
      {
        id: 1,
        name: "–£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞",
        icon: "üåÖ",
        targets: [1, 2],             // ID –Ω–∞–≤—ã–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç
        effects: {                   // –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –Ω–∞–≤—ã–∫–∏
          "1": 1,                    // +1 –∫ –Ω–∞–≤—ã–∫—É —Å ID=1
          "2": 1                     // +1 –∫ –Ω–∞–≤—ã–∫—É —Å ID=2
        },
        order: 1,                    // –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        isQuickAction: true          // –ë—ã—Å—Ç—Ä–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ –Ω–µ—Ç
      },
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
    ],
    
    // üé≠ –°–æ—Å—Ç–æ—è–Ω–∏—è (—Ä–æ–ª–∏)
    states: [
      {
        id: 1,
        name: "–ó–¥–æ—Ä–æ–≤—ã–π —á–µ–ª–æ–≤–µ–∫",
        icon: "üí™",
        skillIds: [1, 2, 3],         // –ù–∞–≤—ã–∫–∏, –≤—Ö–æ–¥—è—â–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        stateIds: [],                // –ó–∞–≤–∏—Å–∏–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        level: 3,                    // –£—Ä–æ–≤–µ–Ω—å —Å–æ—Å—Ç–æ—è–Ω–∏—è
        order: 1                     // –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
      },
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    ],
    
    // üìà –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
    checkins: [
      {
        id: "checkin_1733123456789",
        type: "protocol",            // –¢–∏–ø: protocol, drag_drop, quick_action
        protocolId: 1,              // ID –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
        protocolName: "–£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞",
        action: "+",                // –î–µ–π—Å—Ç–≤–∏–µ: + –∏–ª–∏ -
        timestamp: "2024-06-01T08:00:00.000Z",
        changes: {                  // –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤
          "1": 1,                   // –ù–∞–≤—ã–∫ ID=1 –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ +1
          "2": 1                    // –ù–∞–≤—ã–∫ ID=2 –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ +1
        }
      },
      {
        id: "checkin_1733123567890",
        type: "drag_drop",
        subType: "skill",           // protocol –∏–ª–∏ skill
        itemId: 5,                  // ID –ø–µ—Ä–µ–º–µ—â–µ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        itemName: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏",
        fromPosition: 5,
        toPosition: 3,
        timestamp: "2024-06-01T09:15:00.000Z"
      },
      // ... –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
    ]
  }
}
```

### üìè –†–∞–∑–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö:

- **–û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: ~10-50 KB (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å—Ç–æ—Ä–∏–∏)
- **–°—Ä–µ–¥–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: ~25 KB
- **1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: ~25 MB
- **–õ–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞**: 512 MB (~20,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∏ API {#–ø–æ—Ç–æ–∫-–¥–∞–Ω–Ω—ã—Ö-–∏-api}

### üåê API Endpoints (–º–∞—Ä—à—Ä—É—Ç—ã):

#### 1. **GET** `/api/user/data` - –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
// –ó–∞–ø—Ä–æ—Å
Headers: {
  Authorization: "Bearer {firebase_token}"
}

// –û—Ç–≤–µ—Ç
{
  success: true,
  data: {
    skills: [...],
    protocols: [...],
    states: [...],
    checkins: [...]
  }
}
```

#### 2. **POST** `/api/user/data` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
// –ó–∞–ø—Ä–æ—Å
Headers: {
  Authorization: "Bearer {firebase_token}",
  Content-Type: "application/json"
}
Body: {
  skills: [...],       // –í—Å–µ –Ω–∞–≤—ã–∫–∏
  protocols: [...],    // –í—Å–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã  
  states: [...],       // –í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  checkins: [...]      // –í—Å—è –∏—Å—Ç–æ—Ä–∏—è
}

// –û—Ç–≤–µ—Ç
{
  success: true,
  message: "Data saved successfully"
}
```

#### 3. **GET** `/api/user/history` - –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–µ–π—Å—Ç–≤–∏–π
```javascript
// –ó–∞–ø—Ä–æ—Å
GET /api/user/history?limit=100&skip=0
Headers: {
  Authorization: "Bearer {firebase_token}"
}

// –û—Ç–≤–µ—Ç
{
  success: true,
  data: [...],         // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–ø–∏—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏
  total: 500           // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
}
```

### üîÑ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:

#### –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç check-in:

1. **Frontend** (js/app.js):
```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É
App.checkin(protocolId, '+')
  ‚Üì
// –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
Storage.addCheckin(protocolId, '+')
  ‚Üì
// –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const token = await firebaseAuth.currentUser.getIdToken()
  ‚Üì
// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
apiClient.saveUserData(allUserData)
```

2. **Backend** (server.js):
```javascript
// –ü–æ–ª—É—á–∞–µ–º –∑–∞–ø—Ä–æ—Å
app.post('/api/user/data', async (req, res) => {
  ‚Üì
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω
const decodedToken = await admin.auth().verifyIdToken(token)
const userId = decodedToken.uid
  ‚Üì
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ MongoDB
await User.findOneAndUpdate(
  { firebaseUid: userId },
  { userData: req.body },
  { upsert: true }
)
  ‚Üì
// –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
res.json({ success: true })
})
```

3. **MongoDB Atlas**:
```javascript
// –ù–∞—Ö–æ–¥–∏–º –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
db.users.findOne({ firebaseUid: "abc123" })
  ‚Üì
// –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
db.users.updateOne(
  { firebaseUid: "abc123" },
  { 
    $set: { 
      userData: newData,
      updatedAt: new Date()
    }
  }
)
```

### üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

#### Frontend ‚Üí Backend:
- **Authorization Token**: Firebase JWT —Ç–æ–∫–µ–Ω
- **User Data**: –ü–æ–ª–Ω—ã–π JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **API Endpoint**: –ö–∞–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å

#### Backend ‚Üí MongoDB:
- **Firebase UID**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **User Data**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Timestamps**: –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### MongoDB ‚Üí Backend:
- **Document**: –ü–æ–ª–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Status**: –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ (success/error)
- **Metadata**: –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö {#–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã}

### 1. üçÉ **MongoDB Atlas - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

#### –ö–∞–∫ –∑–∞–π—Ç–∏:
1. –û—Ç–∫—Ä—ã—Ç—å: https://cloud.mongodb.com
2. –í–æ–π—Ç–∏ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω –ø—Ä–æ–µ–∫—Ç
3. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç `rpg-therapy`
4. –ù–∞–∂–∞—Ç—å `Browse Collections`

#### –ß—Ç–æ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:
```
üìä Database: test
‚îî‚îÄ‚îÄ üìã Collection: users
    ‚îú‚îÄ‚îÄ üë§ User Document 1
    ‚îÇ   ‚îú‚îÄ‚îÄ üÜî _id: ObjectId(...)
    ‚îÇ   ‚îú‚îÄ‚îÄ üîë firebaseUid: "firebase_user_id"  
    ‚îÇ   ‚îú‚îÄ‚îÄ üìß email: "user@gmail.com"
    ‚îÇ   ‚îú‚îÄ‚îÄ üë§ displayName: "User Name"
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÖ createdAt: Date
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÖ updatedAt: Date
    ‚îÇ   ‚îî‚îÄ‚îÄ üì¶ userData: { ... }  ‚Üê –í–°–ï –î–ê–ù–ù–´–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
    ‚îî‚îÄ‚îÄ üë§ User Document 2
        ‚îî‚îÄ‚îÄ ...
```

#### –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ MongoDB Atlas:
- üîç **Search**: –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ email
- üìä **Filters**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- üìà **Charts**: –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìÅ **Export**: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON/CSV
- üîç **Query**: –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### –ü—Ä–∏–º–µ—Ä—ã –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
```javascript
// –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
{ "email": "user@gmail.com" }

// –ù–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è
{ "createdAt": { "$gte": ISODate("2024-06-01") } }

// –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –Ω–∞–≤—ã–∫–æ–º
{ "userData.skills.name": "–§–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" }

// –ü–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ check-ins —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
db.users.aggregate([
  { $match: { "email": "user@gmail.com" } },
  { $project: { checkinCount: { $size: "$userData.checkins" } } }
])
```

### 2. üî• **Firebase Console - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**

#### –ö–∞–∫ –∑–∞–π—Ç–∏:
1. –û—Ç–∫—Ä—ã—Ç—å: https://console.firebase.google.com
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç `gamemode-ea510`
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ `Authentication` ‚Üí `Users`

#### –ß—Ç–æ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:
```
üë• Authentication Users
‚îú‚îÄ‚îÄ üë§ User 1
‚îÇ   ‚îú‚îÄ‚îÄ üÜî UID: "abc123def456"        ‚Üê –°–≤—è–∑–∫–∞ —Å MongoDB
‚îÇ   ‚îú‚îÄ‚îÄ üìß Email: "user@gmail.com"
‚îÇ   ‚îú‚îÄ‚îÄ üë§ Display Name: "User Name"
‚îÇ   ‚îú‚îÄ‚îÄ üìÖ Created: 01.06.2024
‚îÇ   ‚îú‚îÄ‚îÄ üìÖ Last Sign In: 01.06.2024
‚îÇ   ‚îî‚îÄ‚îÄ ‚úÖ Email Verified: true
‚îú‚îÄ‚îÄ üë§ User 2
‚îî‚îÄ‚îÄ ...
```

#### –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Firebase:
- üë• **User Management**: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìß **Email Actions**: –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª–µ–π, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- üìä **Analytics**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Ö–æ–¥–æ–≤ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- üîç **Search**: –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ email/UID
- üì± **Provider Info**: –ß–µ—Ä–µ–∑ –∫–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å –≤–æ—à–µ–ª (Google/Facebook/etc)

### 3. üöÇ **Railway Dashboard - –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

#### –ö–∞–∫ –∑–∞–π—Ç–∏:
1. –û—Ç–∫—Ä—ã—Ç—å: https://railway.app
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç `rpg-therapy-backend`
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ `Deployments` ‚Üí `View Logs`

#### –ß—Ç–æ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:
```
üìä Backend Logs
‚îú‚îÄ‚îÄ üöÄ Server startup logs
‚îú‚îÄ‚îÄ üîê Authentication attempts  
‚îú‚îÄ‚îÄ üíæ Database connections
‚îú‚îÄ‚îÄ üì° API requests
‚îÇ   ‚îú‚îÄ‚îÄ GET /api/user/data
‚îÇ   ‚îú‚îÄ‚îÄ POST /api/user/data  
‚îÇ   ‚îî‚îÄ‚îÄ GET /api/test
‚îú‚îÄ‚îÄ ‚ùå Error logs
‚îî‚îÄ‚îÄ üìà Performance metrics
```

#### –ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –ª–æ–≥–æ–≤:
- üïí **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API**: –ö–∞–∫ –±—ã—Å—Ç—Ä–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
- üë• **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –ö—Ç–æ –∏ –∫–æ–≥–¥–∞ –∑–∞—Ö–æ–¥–∏–ª
- üêõ **–û—à–∏–±–∫–∏**: –ß—Ç–æ –ª–æ–º–∞–µ—Ç—Å—è –∏ –ø–æ—á–µ–º—É
- üíæ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø {#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å-–∏-–¥–æ—Å—Ç—É–ø}

### üõ°Ô∏è –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö:

#### 1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ö—Ç–æ —ç—Ç–æ?)**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Google OAuth ‚Üí Firebase Auth ‚Üí JWT Token
```
- ‚úÖ –¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—ã Google –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- ‚úÖ –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –≤ Google)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π logout –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### 2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å?)**
```
JWT Token ‚Üí Backend –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º
```
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –¢–æ–∫–µ–Ω—ã –∏—Å—Ç–µ–∫–∞—é—Ç —á–µ—Ä–µ–∑ 1 —á–∞—Å (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

#### 3. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–ö–∞–∫ –∑–∞—â–∏—â–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ?)**
```
HTTPS ‚Üí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ ‚Üí MongoDB Atlas —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
```
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ HTTPS
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∏—Å–∫–∞
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Ç–æ–∂–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã

#### 4. **–°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
```
CORS ‚Üí –¢–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã ‚Üí IP —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è MongoDB
```
- ‚úÖ API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ —Å github.io
- ‚úÖ MongoDB –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —Å IP –∞–¥—Ä–µ—Å–æ–≤ Railway
- ‚úÖ –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

### üîë –ö—Ç–æ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º:

#### –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø:
- üë®‚Äçüíª **–í–ª–∞–¥–µ–ª–µ—Ü MongoDB Atlas –∞–∫–∫–∞—É–Ω—Ç–∞** (–≤—ã)
- üë®‚Äçüíª **–í–ª–∞–¥–µ–ª–µ—Ü Firebase –ø—Ä–æ–µ–∫—Ç–∞** (–≤—ã)
- üë®‚Äçüíª **–í–ª–∞–¥–µ–ª–µ—Ü Railway –ø—Ä–æ–µ–∫—Ç–∞** (–≤—ã)

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø:
- üë§ **–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º
- ü§ñ **Backend —Å–µ—Ä–≤–µ—Ä** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### –ù–∏–∫–∞–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
- üö´ **–î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - –Ω–µ –≤–∏–¥—è—Ç —á—É–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
- üö´ **–ü–æ–∏—Å–∫–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã** - –≤—Å–µ API –∑–∞—â–∏—â–µ–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- üö´ **–•–∞–∫–µ—Ä—ã** - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞

### ‚ö†Ô∏è –ß—Ç–æ –Ω–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å:

‚ùå **–î–µ–ª–∏—Ç—å—Å—è —Ç–æ–∫–µ–Ω–∞–º–∏ Firebase**
‚ùå **–ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã MongoDB Atlas —Å –¥–∞–Ω–Ω—ã–º–∏**
‚ùå **–î–æ–±–∞–≤–ª—è—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª—é–¥–µ–π –≤ Firebase –ø—Ä–æ–µ–∫—Ç**
‚ùå **–û—Ç–∫–ª—é—á–∞—Ç—å HTTPS**
‚ùå **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤**

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö {#–ø—Ä–∏–º–µ—Ä—ã-–¥–∞–Ω–Ω—ã—Ö}

### üë§ –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MongoDB:

```javascript
{
  "_id": ObjectId("665a1b2c3d4e5f6789abcdef"),
  "firebaseUid": "xyz789abc123def456ghi789",
  "email": "ivan.petrov@gmail.com", 
  "displayName": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "createdAt": ISODate("2024-06-01T10:30:00.000Z"),
  "updatedAt": ISODate("2024-06-01T15:45:30.000Z"),
  "userData": {
    "skills": [
      {
        "id": 1,
        "name": "–§–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –†–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º",
        "icon": "üèÉ",
        "hover": "–§–∏–∑–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –∑–∞—Ä—è–¥–∫–∞, –ø—Ä–æ–±–µ–∂–∫–∏, —Å–ø–æ—Ä—Ç–∑–∞–ª",
        "level": 7,
        "experience": 245,
        "order": 1
      },
      {
        "id": 2, 
        "name": "–ü–∏—Ç–∞–Ω–∏–µ. –°–ª–µ–¥–∏—Ç—å –∑–∞ –∑–¥–æ—Ä–æ–≤—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º",
        "icon": "ü•ó",
        "hover": "–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ, –ë–ñ–£, –≤–∏—Ç–∞–º–∏–Ω—ã, —Ä–µ–∂–∏–º",
        "level": 4,
        "experience": 89,
        "order": 2
      }
    ],
    "protocols": [
      {
        "id": 1,
        "name": "–£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞. 15 –º–∏–Ω—É—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π",
        "icon": "üåÖ",
        "targets": [1],
        "effects": {"1": 1},
        "order": 1,
        "isQuickAction": true
      },
      {
        "id": 2,
        "name": "–ó–¥–æ—Ä–æ–≤—ã–π –∑–∞–≤—Ç—Ä–∞–∫. –ö–∞—à–∞ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏",
        "icon": "üçé", 
        "targets": [2],
        "effects": {"2": 1},
        "order": 2,
        "isQuickAction": false
      }
    ],
    "states": [
      {
        "id": 1,
        "name": "–ó–¥–æ—Ä–æ–≤—ã–π —á–µ–ª–æ–≤–µ–∫. –§–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ",
        "icon": "üí™",
        "skillIds": [1, 2],
        "stateIds": [],
        "level": 5,
        "order": 1
      }
    ],
    "checkins": [
      {
        "id": "checkin_1733147820000",
        "type": "protocol",
        "protocolId": 1,
        "protocolName": "–£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞. 15 –º–∏–Ω—É—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π",
        "action": "+",
        "timestamp": "2024-06-01T08:00:00.000Z",
        "changes": {"1": 1}
      },
      {
        "id": "checkin_1733151420000", 
        "type": "protocol",
        "protocolId": 2,
        "protocolName": "–ó–¥–æ—Ä–æ–≤—ã–π –∑–∞–≤—Ç—Ä–∞–∫. –ö–∞—à–∞ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏",
        "action": "+", 
        "timestamp": "2024-06-01T09:00:00.000Z",
        "changes": {"2": 1}
      },
      {
        "id": "checkin_1733155020000",
        "type": "drag_drop",
        "subType": "skill",
        "itemId": 2,
        "itemName": "–ü–∏—Ç–∞–Ω–∏–µ. –°–ª–µ–¥–∏—Ç—å –∑–∞ –∑–¥–æ—Ä–æ–≤—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º",
        "fromPosition": 2,
        "toPosition": 1,
        "timestamp": "2024-06-01T10:00:00.000Z"
      }
    ]
  }
}
```

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```javascript
// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
db.users.countDocuments()
// –†–µ–∑—É–ª—å—Ç–∞—Ç: 15

// –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
db.users.aggregate([
  {$project: {size: {$bsonSize: "$$ROOT"}}},
  {$group: {_id: null, avgSize: {$avg: "$size"}}}
])
// –†–µ–∑—É–ª—å—Ç–∞—Ç: ~25KB –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

// –°–∞–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É check-ins)
db.users.aggregate([
  {$project: {
    email: 1,
    checkinCount: {$size: "$userData.checkins"}
  }},
  {$sort: {checkinCount: -1}},
  {$limit: 5}
])

// –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–∞—Ç–∞–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
db.users.aggregate([
  {$group: {
    _id: {$dateToString: {format: "%Y-%m-%d", date: "$createdAt"}},
    count: {$sum: 1}
  }},
  {$sort: {_id: 1}}
])
```

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö {#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–±–∞–∑–æ–π}

### üìä MongoDB Atlas Dashboard:

#### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
1. **Browse Collections** - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
2. **Data Explorer** - –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è  
3. **Charts** - —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
4. **Triggers** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
5. **Search** - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

#### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```javascript
// === –ü–û–ò–°–ö –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ===

// –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
db.users.findOne({"email": "ivan@gmail.com"})

// –ù–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å
db.users.find({
  "createdAt": {
    "$gte": new Date(Date.now() - 24*60*60*1000)
  }
})

// –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–≤–Ω–µ–º –Ω–∞–≤—ã–∫–∞
db.users.find({
  "userData.skills": {
    "$elemMatch": {"level": {"$gte": 8}}
  }
})

// === –°–¢–ê–¢–ò–°–¢–ò–ö–ê ===

// –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ check-ins –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
db.users.aggregate([
  {$project: {checkinCount: {$size: "$userData.checkins"}}},
  {$group: {_id: null, total: {$sum: "$checkinCount"}}}
])

// –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
db.users.aggregate([
  {$unwind: "$userData.checkins"},
  {$match: {"userData.checkins.type": "protocol"}},
  {$group: {
    _id: "$userData.checkins.protocolName",
    count: {$sum: 1}
  }},
  {$sort: {count: -1}}
])

// === –û–ß–ò–°–¢–ö–ê –î–ê–ù–ù–´–• ===

// –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ check-ins (—Å—Ç–∞—Ä—à–µ 6 –º–µ—Å—è—Ü–µ–≤)
db.users.updateMany(
  {},
  {$pull: {
    "userData.checkins": {
      "timestamp": {
        "$lt": new Date(Date.now() - 6*30*24*60*60*1000)
      }
    }
  }}
)

// === –ë–≠–ö–ê–ü–´ ===

// MongoDB Atlas –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –±—ç–∫–∞–ø—ã
// –ù–æ –º–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é:
mongoexport --uri="mongodb+srv://..." --collection=users --out=backup.json
```

### üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:
- ‚úÖ **–ë—ç–∫–∞–ø—ã** - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å (Atlas –¥–µ–ª–∞–µ—Ç —Å–∞–º)
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - 24/7 –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏

#### –†—É—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):
- üîÑ **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö check-ins
- üìä **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- üÜî **–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤** - —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞
- üìà **–ê–ø–≥—Ä–µ–π–¥ –ø–ª–∞–Ω–∞** - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–∏
db.users.stats()

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã  
db.users.find().sort({$natural: -1}).limit(1)

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
db.users.getIndexes()

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
db.runCommand({serverStatus: 1})
```

---

## üö® Troubleshooting {#troubleshooting}

### ‚ùå –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

#### 1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–±–ª–∞–∫–æ
**–°–∏–º–ø—Ç–æ–º—ã**: 
- –õ–æ–∫–∞–ª—å–Ω–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã–µ "–æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è"
- –í –∫–æ–Ω—Å–æ–ª–∏ –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('User authenticated:', !!firebaseAuth.currentUser);
console.log('API URL:', apiClient.baseURL);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç API
fetch('https://rpg-therapy-backend-production.up.railway.app/api/test')
  .then(r => r.json())
  .then(console.log);
```

**–†–µ—à–µ–Ω–∏—è**:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Railway —Å–µ—Ä–≤–µ—Ä–∞
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ Railway Dashboard
4. ‚úÖ –ü–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –≤ Firebase

#### 2. **MongoDB connection timeout**

**–ü—Ä–æ–±–ª–µ–º–∞**: Backend –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ
**–°–∏–º–ø—Ç–æ–º—ã**:
- –í Railway –ª–æ–≥–∞—Ö: "MongoDB connection error"
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –æ—à–∏–±–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ MongoDB Atlas
# Network Access ‚Üí IP Whitelist ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0.0.0.0/0

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å connection string
# Database ‚Üí Connect ‚Üí Connection string for applications
```

**–†–µ—à–µ–Ω–∏—è**:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP whitelist –≤ MongoDB Atlas
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å connection string
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Railway deployment
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–≤–æ—Ç—ã MongoDB Atlas

#### 3. **–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –∏—Å—á–µ–∑–ª–∏
**–°–∏–º–ø—Ç–æ–º—ã**:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "—á–∏—Å—Ç–æ–µ" –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
- –ò—Å—Ç–æ—Ä–∏—è check-ins –ø—É—Å—Ç–∞
- –ù–∞–≤—ã–∫–∏ –Ω–∞ –Ω—É–ª–µ–≤—ã—Ö —É—Ä–æ–≤–Ω—è—Ö

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```javascript
// –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ MongoDB Atlas
db.users.findOne({"email": "–ø—Ä–æ–±–ª–µ–º–Ω—ã–π_email@gmail.com"})

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Firebase UID
// Firebase Console ‚Üí Authentication ‚Üí –Ω–∞–π—Ç–∏ –ø–æ email

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ UID –≤ Firebase –∏ MongoDB
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
1. üîÑ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª —Å –¥—Ä—É–≥–æ–≥–æ Google –∞–∫–∫–∞—É–Ω—Ç–∞**
2. üÜî **Firebase UID –∏–∑–º–µ–Ω–∏–ª—Å—è** (–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ)
3. üíæ **–î–∞–Ω–Ω—ã–µ –Ω–µ –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã** –≤ –æ–±–ª–∞–∫–æ —Ä–∞–Ω–µ–µ
4. üêõ **–ë–∞–≥ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏—è**:
1. ‚úÖ –ü–æ–ø—Ä–æ—Å–∏—Ç—å –≤–æ–π—Ç–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ Google –∞–∫–∫–∞—É–Ω—Ç–∞
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ email —Ç–æ–≥–æ –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞ MongoDB Atlas
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

#### 4. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã**:
- –î–æ–ª–≥–∏–π —Å–ø–∏–Ω–Ω–µ—Ä –ø—Ä–∏ –≤—Ö–æ–¥–µ
- Timeout –æ—à–∏–±–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª—É—é—Ç—Å—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```javascript
// –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è API –∑–∞–ø—Ä–æ—Å–æ–≤
console.time('API Load');
fetch('/api/user/data')
  .then(() => console.timeEnd('API Load'));

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
JSON.stringify(userData).length // –≤ –±–∞–π—Ç–∞—Ö
```

**–†–µ—à–µ–Ω–∏—è**:
1. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (—É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ check-ins)
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ MongoDB
3. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
4. ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### üõü –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:

#### –ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:
1. üö® **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ —Ä–µ–∂–∏–º offline** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
2. üìû **–£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç—É—Å —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. üîß **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞** - MongoDB Atlas Point-in-Time Recovery
4. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. üîç **–ù–∞–π—Ç–∏ –≤ –±—ç–∫–∞–ø–∞—Ö** - Atlas —Ö—Ä–∞–Ω–∏—Ç 2 –¥–Ω—è –±—ç–∫–∞–ø–æ–≤
2. üìß **–°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º** - —É—Ç–æ—á–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏
3. üîÑ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é** - –∏–∑ –±—ç–∫–∞–ø–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å
4. üìù **–ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç** - –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ {#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥}

### üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

#### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
- **–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ**: `db.users.countDocuments()`
- **–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ –¥–µ–Ω—å**: –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –Ω–æ–≤—ã—Ö check-ins
- **–ù–æ–≤—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é**: –ü–æ –ø–æ–ª—é `createdAt`
- **–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏**: –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

#### üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö**: 25KB √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π**: –ó–∞–ø—Ä–æ—Å—ã –≤ –º–∏–Ω—É—Ç—É
- **–û—à–∏–±–∫–∏**: –ü—Ä–æ—Ü–µ–Ω—Ç –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏**: –û—Ç –≤—Ö–æ–¥–∞ –¥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–í—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**: –û—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Uptime**: –ü—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### üìà –ó–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:

```javascript
// === –ê–ö–¢–ò–í–ù–û–°–¢–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ===

// –°–∞–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
db.users.aggregate([
  {$project: {
    email: 1,
    recentCheckins: {
      $filter: {
        input: "$userData.checkins",
        cond: {$gte: [
          {$dateFromString: {dateString: "$$this.timestamp"}},
          new Date(Date.now() - 7*24*60*60*1000)
        ]}
      }
    }
  }},
  {$project: {
    email: 1,
    checkinCount: {$size: "$recentCheckins"}
  }},
  {$sort: {checkinCount: -1}},
  {$limit: 10}
])

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∑–∞—Ö–æ–¥–∏–ª–∏ –±–æ–ª—å—à–µ –º–µ—Å—è—Ü–∞
db.users.find({
  "updatedAt": {
    "$lt": new Date(Date.now() - 30*24*60*60*1000)
  }
})

// === –ö–û–ù–¢–ï–ù–¢-–ê–ù–ê–õ–ò–¢–ò–ö–ê ===

// –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
db.users.aggregate([
  {$unwind: "$userData.checkins"},
  {$match: {"userData.checkins.type": "protocol"}},
  {$group: {
    _id: "$userData.checkins.protocolName",
    usageCount: {$sum: 1},
    uniqueUsers: {$addToSet: "$email"}
  }},
  {$project: {
    protocolName: "$_id",
    usageCount: 1,
    uniqueUserCount: {$size: "$uniqueUsers"}
  }},
  {$sort: {usageCount: -1}}
])

// –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞–≤—ã–∫–æ–≤ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
db.users.aggregate([
  {$unwind: "$userData.skills"},
  {$group: {
    _id: "$userData.skills.name",
    avgLevel: {$avg: "$userData.skills.level"},
    userCount: {$sum: 1}
  }},
  {$sort: {avgLevel: -1}}
])

// === –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ú–ï–¢–†–ò–ö–ò ===

// –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
db.users.aggregate([
  {$project: {
    size: {$bsonSize: "$$ROOT"},
    checkinCount: {$size: "$userData.checkins"}
  }},
  {$group: {
    _id: null,
    avgSize: {$avg: "$size"},
    avgCheckins: {$avg: "$checkinCount"},
    totalUsers: {$sum: 1}
  }}
])
```

### üîî –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

#### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
1. **MongoDB Atlas Alerts** - –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ 80% –∫–≤–æ—Ç—ã
2. **Railway Alerts** - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API –∏–ª–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ  
3. **Firebase Analytics** - –ø—Ä–∏ –∞–Ω–æ–º–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
4. **Uptime monitoring** - –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è:
- üö® **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞** > 5 –º–∏–Ω—É—Ç
- ‚ö†Ô∏è **–ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** > 10% –∑–∞ —á–∞—Å
- üìä **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–≤–æ—Ç** > 90% –æ—Ç –ª–∏–º–∏—Ç–∞
- üêå **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** > 5 —Å–µ–∫—É–Ω–¥

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - —ç—Ç–æ **—Å–µ—Ä–¥—Ü–µ RPG Therapy —Å–∏—Å—Ç–µ–º—ã**, –∫–æ—Ç–æ—Ä–∞—è:

- üíæ **–ù–∞–¥–µ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç** –¥–∞–Ω–Ω—ã–µ —Ç—ã—Å—è—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üîí **–ó–∞—â–∏—â–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- ‚ö° **–ë—ã—Å—Ç—Ä–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** –∑–∞–ø—Ä–æ—Å—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è** –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –∞—É–¥–∏—Ç–æ—Ä–∏–∏
- üõ°Ô∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø—ã** –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏:

‚úÖ **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ**: –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
‚úÖ **–ï–∂–µ–º–µ—Å—è—á–Ω–æ**: –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏  
‚úÖ **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö**: –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –≤ Railway/MongoDB Atlas
‚úÖ **–ü—Ä–∏ —Ä–æ—Å—Ç–µ**: –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–≤–æ—Ç—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å –≤–∞—à–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏! üöÄ

---

*üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: –ò—é–Ω—å 2024*  
*üíæ –ê–≤—Ç–æ—Ä: RPG Therapy Database Team*  
*üîÑ –í–µ—Ä—Å–∏—è: 1.0* 